## Основные типичные вопросы на должность Middle System Administrator
<img src="https://raw.githubusercontent.com/FuriousWarrior/awesome-interviews-it/work/img/bk.png" alt="" border="0" />


# Основы:

#### 1. Что такое RFC?
Ответ:
RFC (Request for Comments) - Запрос комментариев - документ из серии пронумерованных информационных документов Интернета, содержащих технические спецификации и Стандарты, широко применяемые во Всемирной сети.

#### 2. Стек протокола TCP/IP (количество уровней, в чем отличие от классической модели OSI?)
Ответ:
Содержит 5 уровней, совмещены прикладной с представительским уровнем и сеансовый с транспортным.

#### 3. Что такое MTU?
Ответ:
MTU (Maximum Transmission Unit) - используется для определения максимального размера блока (в байтах), который может быть передан на канальном уровне коммуникационного протокола.

#### 4. Протокол ARP и его назначение
Ответ:
ARP (Address Resolution Protocol — протокол разрешения адресов) — протокол сетевого уровня, предназначенный для преобразования IP-адресов (адресов сетевого уровня) в MAC-адреса (адреса канального уровня) в сетях TCP/IP.

#### 5. Основные различия между протоколами TCP и UDP.  
Ответ:
Основное различие между TCP и UDP заключается в отношении к связи между компьютерами. Протокол TCP устанавливает соединение, при помощи которого компьютеры физически обмениваются сообщениями друг с другом, и при этом компьютер на одном конце соединения знает о компьютере на другом конце соединения. Протокол UDP не устанавливает соединение;
задача этого протокола — собрать сообщение, пристыковать к нему IP-адрес компьютера-получателя и отправить получившийся пакет в сеть. При этом протокол UDP ничего не знает о физическом соединении между компьютерами.

#### 6.	Что означает шлюз по умолчанию
В этом случае все ваши пакеты направляются на маршрутизатор. Остальные сегменты сети остаются недоступными вам до тех пор пока вы вручную не создадите статические маршруты них.
	
#### 7. Имеется сеть 128.108.200.0/16, напишите ее сетевую маску, сетевой и широковещательный адрес.
Ответ:
Сетевая маска: 255.255.0.0
Сетевой адрес: 128.108.0.0
Широковещательный адрес: 128.108.255.255
 
#### 8. К какому классу сетей относится адрес 228.224.17.13?
Ответ:
Данный адрес относится к классу D (групповая адресация)

#### 9. Какими командами можно просмотреть содержимое таблицы маршрутизации?
Ответ: netstat, route

#### 10. DNS — назовите назначение и основные типы записей. На что указывает запись SOA? На каком уровне модели OSI работает?
Ответ:
DNS (Domain Name System — система доменных имён) — распределённая система (распределённая база данных), способная по запросу, содержащему доменное имя хоста (компьютера или другого сетевого устройства), сообщить IP адрес или (в зависимости от запроса) другую информацию
A, AAA, PTR, CNAME, MX, SOA, SRV
Запись SOA (Start of Authority) или начальная запись зоны указывает, на каком сервере хранится эталонная информация о данном домене, содержит контактную информацию лица, ответственного за данную зону, тайминги кеширования зонной информации и взаимодействия DNS-серверов.
Работает на представительском уровне.

#### 11. Сколько DNS серверов необходимо иметь для поддержки зоны?
Ответ: два Primary и Secondary.

#### 12. DHCP — назначение, уровень модели OSI? Есть ли зависимость между протоколами BOOTP и DHCP? Параметры передаваемые данным протоклом?
Ответ:
DHCP (Dynamic Host Configuration Protocol — протокол динамической конфигурации узла) — это сетевой протокол, позволяющий компьютерам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. Данный протокол работает по модели «клиент-сервер».
Зависимость есть, DHCP является надстройкой над BOOTP
Основные передаваемые параметры: сервера DNS, Wins, NTP,  Proxy и пр.

#### 13. В чем сходства и различия дисковых интерфейсов SCSI, iSCSI и SAS?
Ответ:
- SCSI - (Small Computer System Interface) — интерфейс, разработанный для объединения на одной шине различных по своему назначению устройств, таких как жёсткие диски, накопители на магнитооптических дисках, приводы CD, DVD, стримеры, сканеры, принтеры и т. д.
- iSCSI - это протокол SCSI через IP, связывающий сервер с хранилищем данных. Другие протоколы обеспечивают соединение Fibre Channel - Fibre Channel с различной степенью интеллектуальности.
- Serial Attached SCSI (SAS) — компьютерный интерфейс, разработанный для обмена данными с такими устройствами, как жёсткие диски, накопители на оптическом диске и т. д. SAS использует последовательный интерфейс для работы с непосредственно подключаемыми накопителями (Direct Attached Storage (DAS) devices). SAS разработан для замены параллельного интерфейса SCSI и позволяет достичь более высокой пропускной способности, чем SCSI; в то же время SAS совместим с интерфейсом SATA. Хотя SAS использует последовательный интерфейс в отличие от параллельного интерфейса, используемого традиционным SCSI, для управления SAS-устройствами по-прежнему используются команды SCS

#### 14. Какие уровни RAID знаете? Дайте краткое описание.

Ответ:
- RAID0 - «чередование» (striping)
- RAID1 - «зеркалирование» (mirroring)
- RAID5 – чередование с контролем четности
- RAID10 – диски объединяются парами в зеркала с последующим чередованием
- RAID50 - объединение двух(или более, но это крайне редко применяется) массивов RAID5 в страйп, т.е. комбинация RAID5 и RAID0

#### 

# Вопросы для сетевиков:

####  1. Расскажите про сетевую модель OSI более подробно.
- 1 уровень. Физический (physical). Единицей нагрузки (PDU) здесь является бит. Кроме единиц и нулей физический уровень не знает ничего. На этом уровне работают провода, патч панели, сетевые концентраторы (хабы, которые сейчас уже сложно найти в привычных нам сетях), сетевые адаптеры. Именно сетевые адаптеры и ничего более из компьютера. Сам сетевой адаптер принимает последовательность бит и передает её дальше.
- 2 уровень. Канальный (data link). PDU - кадр (frame). На этом уровне появляется адресация. Адресом является MAC адрес. Канальный уровень ответственен за доставку кадров адресату и их целостность. В привычных нам сетях на канальном уровне работает протокол ARP. Адресация второго уровня работает только в пределах одного сетевого сегмента и ничего не знает о маршрутизации - этим занимается вышестоящий уровень. Соответственно, устройства, работающие на L2 - коммутаторы, мосты и драйвер сетевого адаптера.
- 3 уровень. Сетевой (network). PDU пакет (packet). Наиболее распространенным протоколом (дальше не буду говорить про “наиболее распространенный” - статья для новичков и с экзотикой они, как правило,  не сталкиваются) тут является IP. Адресация происходит по IP-адресам, которые состоят из 32 битов. Протокол маршрутизируемый, то есть пакет способен попасть в любую часть сети через какое-то количество маршрутизаторов. На L3 работают маршрутизаторы.
- 4 уровень. Транспортный (transport). PDU сегмент (segment)/датаграмма (datagram). На этом уровне появляются понятия портов. Тут трудятся TCP и UDP. Протоколы этого уровня отвечают за прямую связь между приложениями и за надежность доставки информации. Например, TCP умеет запрашивать повтор передачи данных в случае, если данные приняты неверно или не все. Так же TCP может менять скорость передачи данных, если сторона приема не успевает принять всё (TCP Window Size).
Следующие уровни “правильно” реализованы лишь в RFC. На практике же, протоколы описанные на следующих уровнях работают одновременно на нескольких уровнях модели OSI, поэтому нет четкого разделения на сеансовый и представительский уровни. В связи с этим в настоящее время основным используемым стеком является TCP/IP, о котором поговорим чуть ниже.
- 5 уровень. Сеансовый (session). PDU данные (data). Управляет сеансом связи, обменом информации, правами. Протоколы - L2TP, PPTP.
- 6 уровень. Представительский (presentation). PDU данные (data). Преставление и шифрование данных. JPEG, ASCII, MPEG.
- 7 уровень. Прикладной (application). PDU данные (data). Самый многочисленный и разнообразный уровень. На нем выполняются все высокоуровненвые протоколы. Такие как POP, SMTP, RDP, HTTP и т.д. Протоколы здесь не должны задумываться о маршрутизации или гарантии доставки информации - этим занимаются нижестоящие уровни. На 7 уровне необходима лишь реализации конкретных действий, например получение html-кода или email-сообщения конкретному адресату.


<img src="https://raw.githubusercontent.com/FuriousWarrior/awesome-interviews-it/work/img/OSI.JPG" alt="" border="0" />

####  2. На каких портах по умолчанию работают следующие службы: DNS, HTTP, HTTPS, SMTP, POP3, IMAP.

DNS – 53 порт
HTTP – 80 порт
HTTPS – 443 порт
SMTP – 25 порт
POP3 – 110 порт
IMAP – 143 порт

####  3. какая разница между коммутатором, маршрутизатором и концентратором?
Концентратор (хаб) - сетевое устройство, для объединения нескольких устройств Ethernet в общий сегмент. Получив пакет, концентратор пересылает его на все свои порты, кроме исходного.
Сетевой коммутатор (свитч) - устройство, предназначенное для соединения нескольких узлов компьютерной сети в пределах одного сегмента. В отличие от концентратора, который распространяет трафик от одного подключенного устройства ко всем остальным, коммутатор передает данные только непосредственно получателю.
Маршрутизатор (роутер) - сетевое устройство, на основании информации о топологии сети и определённых правил принимающее решения о пересылке пакетов. Применяется в качестве "моста" между двумя сетями, является более сложным, чем свитч. Часто имеет собственный фаерволл.

####  4. что такое APIPA ?
Технология, которая позволяет автоматически создаавать IP-сеть без конфигурации или специальных серверов.

####  5. что такое WPA/WEP?
Алгоритмы для обеспечения безопасности сетей Wi-Fi

####  6. что такое протокол SNMP
Простой протокол управления сетями — это протокол управления сетями связи на основе архитектуры UDP. Устройства, которые обычно поддерживают SNMP это роутеры, свитчи, серверы, рабочие станции, принтеры, модемы и т.д.

####  7. что такое VPN и какие основные варианты вы знаете?
Виртуальная частная сеть - обобщённое название технологий, позволяющих обеспечить одно или несколько сетевых соединений (логическую сеть) поверх другой сети (например, Интернет). Виды: IPSec, PPTP, L2TP, EasyVPN, SSLVPN

####  8. как должен быть обжат кабель Ethernet при соединении двух компьютеров на прямую?
cross-over

####  9. веб-сервер не пингуется, то как установить работает ли он?
telnet server.server.ru 80

####  10. Раскажите про обжим витой пары, какие варианты возможны.
<img src="https://raw.githubusercontent.com/FuriousWarrior/awesome-interviews-it/work/img/lan.png" alt="" border="0" />

####  11. Опишите своими словами функции и синтаксис команды «PING». Назовите известные вам ключи этой команды.
Команда ping отправляет запросы указанному узлу сети и замеряет поступаю-
щие ответы. 
- Время между отправкой запроса и получением ответа позволяет определить 
частоту потери пакетов (если она есть), и наличие проверяемого узла (шлюз провай-
дера, почтовый сервер). 
- Эта команда позволяет косвенно определять загруженность канала передачи 
данных.
Использование:
ping (ключи) ip-адрес узла
Ключи (основные):
- -t – продолжает посылать пакеты до команды прерывания программы пользователем 
(«вечный» ping)
- -l – размер пакета (в Windows XP максимальное значение 65500 байт )
- -n – число отправляемых запросов.
Примечания. Данная команда будет давать результат только при разрешении прото-
кола ICMP, или данного ответа протокола ICMP на «пингуемом» узле

####  12. Назовите определения и особенности следующих сетевых протоколов – POP3, SMTP, IMAP.
POP3 – Post Office Protocol v.3
Протокол используется для хранения почты на сервере и выдачи ее клиенту элек-
тронной почты на компьютере пользователя. Особенностью является то, что почта с 
сервера потом удаляется. Но есть возможность письма с сервера не удалять. В один 
момент времени возможно подключение только одного пользователя к своему ящику.
SMTP – Simple Mail Transfet Protocol.
Простой протокол передачи почты.
Протокол используется только для отправки и пересылки почты между почтовыми 
серверами и приложениями для работы с электронной почтой.
IMAP – Internet Message Access Protocol.
Протокол доступа к электронной почте Интернета.
Также используется для хранения почты на сервере, но имеет ряд отличительных 
особенностей (по сравнению с POP3):
- Письма хранятся на сервере, а не на компьютере пользователя, но при этом можно настроить, чтобы копия письма хранилась и на компьютере.
- Можно одновременно подключиться к одному и тому же почтовому ящику с разных клиентов.
- Поддерживается нескольких почтовых ящиков (или папок). Клиент может создавать, удалять и переименовывать папки прямо на сервере, а также перемещать письма из одной папки или почтового ящика в другой.
- Возможно создание общих папок, к которым могут иметь доступ несколько пользователей.

####  13. Расскажите своими словами, что такое запись MX 
- Запись MX (mail exchanger) — тип записей в DNS-зоне домена, которые указывают какой сервер будет принимать всю почту, предназначенную для данного доме-
на.
- MX-записей может быть несколько, каждая имеет свой порядковый номер, который 
определяет приоритет доставки почты. Чем меньше номер, тем выше приоритет.
Знание такого понятия как MX, позволяет более тонко и безопасно настраивать почтовую систему компании. Например, можно первым MX-сервером назначить собственный почтовый сервер компании, вторым – сервер на колокейшене, третьим – сервер хостинг- провайдера. В подавляющем большинстве случаев, такая схема обеспечивает отказоустойчивую работу почтовых сервисов

####  14. Расскажите своими словами, что такое NAT.
- NAT (Network Adress Translation – Трансляция сетевых адресов) — это процесс трансляции (или подстановки) локальных адресов во внешние. 
- Маршрутизатор запоминает внутренний ip-адрес исходящего пакета (например, 192.168.0.100), подставляет ip-адрес внешнего подключения (его выдает провайдер – это уникальный «честный» ip-адрес). Приходит ответный пакет на запрос – он отсылает пакет, пославшему его компьютеру. Таким образом, фактически внутренний компьютер локальной сети «подключен» на прямую к INTERNET, со всеми вытекающими отсюда последствиями.

####  15. Что делает команда «NSLOOKUP»? 
- nslookup – утилита, которая предоставляет пользователю делать запрос к DNS-серверам.
Использование: nslookup “доменное имя” – выдаст в ответ ip-адрес, а nslookup “ ip-адрес” – выдаст доменное имя.
Или nslookup “доменное имя” “DNS-сервер” – выдаст в ответ ip-адрес, но при этом , в качестве источника информации, используя указанный DNS-сервер.


#### 16. В кабеле питания три провода: синий, коричневый и жёлто-зелёный. Для чего предназначен каждый из них?
Cиний – обычно фаза, коричневый – обычно ноль, жёлто-зелёный должен быть землёй.

#### 17. Что такое IP
 В 4ой версии IP адрес представляет собой 32-битовое двоичное число. Удобной формой записи IP-адреса (IPv4)
является запись в виде четырёх десятичных чисел (от 0 до 255), разделённых точками
В 6 версии IP адрес (IPv6) имеет 128-битовое представление. Адреса разделяются двоеточиями
(напр. fe80:0:0:0:200:f8ff:fe21:67cf). Большое количество нулевых групп может быть пропущено с помощью
двойного двоеточия (fe80::200:f8ff:fe21:67cf). Такой пропуск может быть единственным в адресе.

#### 18. Расскажите про классификация сетей
Классификация по размеру охваченной территории
- Персональная сеть (PAN, PersonalAreaNetwork)
- Локальнаясеть (LAN, Local Area Network)
- HomePNA
- Объединение нескольких зданий (CAN, CampusAreaNetwork)
- Городскаясеть (MAN, Metropolitan Area Network)
- Национальная сеть
- Глобальная вычислительная сеть (WAN, WideAreaNetwork)
- Сравнительная характеристика сетей (особенности локальных, глобальных и городских сетей)

По типу функционального взаимодействия
- Клиент-сервер
- Смешанная сеть
- Одноранговая сеть
- Многоранговые сети

По типу сетевой топологии
- Шина
- Звезда
- Кольцо
- Решётка
- Смешанная топология
- Полносвязная топология

По функциональному назначению
- Сети хранения данных
- Серверные фермы
- Сети управления процессом
- Сети SOHO

По сетевым ОС
- На основе Windows
- На основе UNIX
- На основе NetWare
- Смешанные

#### 19. Расскажите про СКС
Структури́рованная ка́бельная систе́ма (СКС) — законченная совокупность кабелей связи и коммутационного оборудования, отвечающая требованиям соответствующих нормативных документов[1]. Включает набор кабелей и коммутационных элементов, и методику их совместного использования, позволяющую создавать регулярные расширяемые структуры связей в локальных сетях различного назначения. СКС — физическая основа инфраструктуры здания, позволяющая свести в единую систему множество сетевых информационных сервисов разного назначения: локальные вычислительные сети и телефонные сети, системы безопасности, видеонаблюдения и т. д.

- СКС представляет собой иерархическую кабельную систему, смонтированную в здании или в группе зданий, состоящую из структурных подсистем. В состав СКС входят такие элементы, как:

-  главный кросс (MC);
кабель магистральной подсистемы первого и второго уровня;
промежуточные кроссы (IC);
горизонтальные кроссы (HC) и кабели горизонтальной подсистемы;
а также:

-  консолидационные точки (CP);
многопользовательские телекоммуникационные розетки (MuTOA или MuTO);
телекоммуникационные розетки (TO); и другие элементы.
Система может быть построена на основе медных или оптических кабелей. Все элементы СКС интегрируются в единый комплекс (систему) и эксплуатируются согласно определённым правилам.

-  Кабельная система — это система, элементами которой являются кабели и компоненты, которые связаны с кабелем. К кабельным компонентам относится всё пассивное коммутационное оборудование, служащее для соединения или физического окончания (терминирования) кабеля — телекоммуникационные розетки на рабочих местах, кроссовые и коммутационные панели (жаргон: «патч-панели») в телекоммуникационных помещениях, муфты и сплайсы.

-  Структурированная система — это любой набор или комбинация связанных и зависимых составляющих частей. Термин «структурированная» означает, с одной стороны, способность системы поддерживать различные телекоммуникационные приложения (передачу речи, данных и видеоизображений), с другой — возможность применения различных компонентов и продукции различных производителей, и с третьей — способность к реализации так называемой мультимедийной среды, в которой используются несколько типов передающих сред — коаксиальный кабель, UTP, STP и оптическое волокно. Структуру кабельной системы определяет инфраструктура информационных технологий, IT (англ. information technology), именно она диктует содержание конкретного проекта кабельной системы в соответствии с требованиями конечного пользователя, независимо от активного оборудования, которое может применяться впоследствии.

#### 20. Расскажите про стандарты и категории СКС и пару слов о построение СКС.
В настоящее время в области СКС действуют три основных стандарта:
- TIA/EIA-568-B Commercial Building Telecommunications Wiring Standard (американский стандарт);
- ISO/IEC IS 11801-2002 Information Technology. Generic cabling for customer premises (международный стандарт) ;
- CENELEC EN 50173 Information Technology. Generic cabling systems (европейский стандарт).
- В стандарте EIA/TIA-568B для кабельных линий и для компонентов (кабелей и разъёмов) определены следующие категории:

- категория 3 (сигнал пропускается в полосе частот до 16 МГц);
- категория 5e (полоса частот до 100 МГц);
- категория 6 (полоса частот до 250 МГц);
- категория 6A (полоса частот до 500 МГц).
- В стандарте ISO 11801-2002 и EN 50173 определены классы для кабельных линий:

- класс С (в полосе частот до 16 МГц);
- класс D (в полосе до 100 МГц);
- класс E (в полосе до 250 МГц);
- класс E(A) (в полосе до 500 МГц);
- класс F(A) (в полосе до 600 МГц).
Задаваемый действующими стандартами технический уровень элементной базы гарантирует работоспособность устанавливаемой кабельной системы и поддержку ею работы существующих и перспективных приложений на протяжении как минимум 10 лет.

В целом, проект на СКС должен отвечать требованиям (не всем одновременно) стандартов: ЕIА/ТIА-568B и/или ISO/IEC 11801-2002, ЕIА/ТIА-569А, ЕIА/ТIА-606A, национальных и местных нормативов.

В Российской Федерации с 1 января 2010 года введены в действие ГОСТ Р 53246-2008 и ГОСТ Р 53245-2008, которые определяют общие требования к основным узлам СКС и методику испытания, соответственно. В стандартах ГОСТ Р 53246-2008 и ГОСТ Р 53245-2008 содержатся опечатки и ошибки, поэтому использовать в работе данные стандарты нужно осторожно[2].

Помимо этого, в Российской Федерации с 1 января 2005 года действует открытый стандарт OSSirius SCS 702, положения которого формируются и изменяются исключительно в ходе публичных интернет-обсуждений в пределах, заданных положениями международных стандартов ИСО/МЭК 11801, ANSI/TIA/EIA-568B и российским стандартом ГОСТ Р 53246-2008. Данный стандарт, на основании п. 6.9. ГОСТ Р 1.0-2004, применяется равным образом и в равной мере с ГОСТ Р 53246-2008, независимо от страны и/или места происхождения продукции, осуществления процессов производства, эксплуатации, хранения, перевозки, реализации и утилизации, выполнения работ и оказания услуг, видов или особенностей сделок и/или лиц.

Приложения, поддерживаемые кабельной системой, должны быть одобрены документами Institute of Electronic and Electrical Engineers (IEEE), Asynchronous Transfer Mode (ATM) Forum, American National Standards Institute (ANSI) или International Organization for Standardization (ISO).

Кабельная инфраструктура должна отвечать требованиям стандартов ANSI ТIА/ЕIА-568C и ANSI ТIА/ЕIА-569.


В общем случае, СКС состоит из трёх иерархически организованных подсистем:
- магистральной кабельной подсистемы первого уровня;
- магистральной кабельной подсистемы второго уровня;
- горизонтальной кабельной подсистемы.
- Кабельные кроссы служат интерфейсом между этими подсистемами, при этом подсистемы могут иметь различную топологию, например: «шина», «звезда» или «кольцо». Выделяется также кабельная подсистема рабочего места, часто непосредственно не относящаяся к СКС. Для построения структурированных кабельных систем используются кабели категорий 5 и 6, многопарные медные или волоконно-оптические. Наборы элементов и устройств для СКС состоят из разнообразных типов стоек и коммутационных шкафов, которые также делятся по типу формы и конструкции, напольного или настенного исполнения. Некоторые из подсистем могут отсутствовать, так как в них нет необходимости (напр. отсутствие первичной и вторичной подсистем в одноэтажном здании).


# Linux вопросы:

####  1. Классика, назовите 6 шагов загрузки Linux. 
<img src="https://raw.githubusercontent.com/FuriousWarrior/awesome-interviews-it/work/img/linux_start.png" alt="" border="0" />


####  2. Нормальный load average на сервере виртуального хостинга колеблется от 0 до 2. Load average резко увеличивается до 50. Как понять причину повышения нагрузки? Напишите команды для анализа проблемы и вероятные причины начиная с самой вероятной.
-Можно проверить различными командами top/atop/htop/iotop и df -h
- LA  может подниматься не обязательно изза нагрузки на ЦП, так же возможно изза просадки  HDD,
плюс нагрузка на сеть и на выходе высокий LA.
Для меня сейчас более информативная утилита glances, можно увидеть нагрузку на диски и на сеть, и какую
нагрузку  дают контейнеры. https://github.com/nicolargo/glances 
- Если нагрузку дает приложение тот же apache, я бы начал с логов и посмотрел нагрузку на сеть.
Потом через мод статус посмотрел на какой сайт идет атака и уже дальше можно действовать изходя из информации.
Скорее всего на сервере уже прописаны корректные переменные sysctl и другие механизмы защиты, и поправлен конфиг апача.
Более подробно думаю нет смысла расписывать так как это выходит за рамки вопроса.
- Часто нагрузку может выдавать mysql, когда селект идет уже более 6 часов
с приходом mysql8 когда myisam удалили проблем будет меньше, так как при падении
при грамотной настройке сервер поднимется сам правда если данных было много будет долгий процесс.
- Бывает и DNS Amplification атака и нагрузка идет на хост, лечится добавлением доворенных днс адресов.
Встречал такую атаку и на свой маршрутизатор домашний Mikrotik RB2011UiAS-2HnD-IN.
Решается правильной настройкой фаерволла. 
-И так же нагрузку может создавать почтовый сервер, взломали почтовый ящик и рассылают спам.
Помогут нам логи  и поиск скриптов если еще и взломан сайт был.
- Нагружает tar, gzip.
Возможно пользователь решил сделать бекап.
- Может еще быть такой кейс, пользователь залил свой софт и он грузит ЦП и память и сеть.
Решил устроить ботнет.

####  3. Каким образом можно гарантированно ограничить каждого пользователя виртуального хостинга от выедания им всех ресурсов cpu и памяти linux сервера, учитывая что mod_php/mod_perl не установлены?
- Я предпологаю тут вопрос про конфигурацию  /etc/security/limits.conf 
Там же есть комментарии в файле. Проверить ограничения можно по команде ulimit -a

####  4. Какие методы для борьбы с исходящим спамом через web скрипты и sendmail существуют в mta postfix и exim? Spamassasin и другие спамфильтры рассматривать не нужно.

- в postfix есть несколько параметров, ограничивающих количество отправленных писем
anvil_rate_time_unit = 60s
smtpd_client_message_rate_limit = 10
При данных параметрах с одного ящика можно отправить не более 10 писем за 60 секунд.
smtpd_client_connection_rate_limit = 6 — Количество соединений с одного IP адреса. Если он превышен пользователь получит сообщение «Too many connections from ip»
- Я бы искал спамеров как вариант ниже
grep ‘uid=’ /var/log/mail.log | awk -F ‘uid=’ {‘print$2’} | awk {‘print $1’} | sed ‘s/,//g’ | sort | uniq -c | sort -n | tail -5 | awk {‘print “UID:”,$2,”MESSAGES COUNT:”,$1’}

- Настройка Exim для противодействия распространению спама
- host_reject. Данная опция задается в конфигурационном файле exim.conf.
Ее значение представляет собой список имен узлов и доменов, а также IP-адресов, разделенных двоеточиями.
Почта, переданная с компьютеров, указанных посредством данной опции, должна блокироваться.
Например, запись host_reject = *.spammer.net:11.11.11.0/24 указывает на то, что письма
из домена spammer.net, а также из сети 11.11.11.0/24 должны отвергаться. 
- host_reject_recipients. Данная опция действует так же, как host_reject, но почтовые сообщения отвергаются
лишь в процессе взаимодействия с удаленной программой, в частности, в тот момент,
когда она передает команду RCPT TO:. В результате попытки пересылки писем немедленно прекращаются.
- sender_reject. Данная опция блокирует письма от указанных отправителей. Роль отправителя может выполнять
либо целый домен, либо отдельный пользователь в домене.
- sender_reject_recipients. Данная опция действует подобно опции sender_reject,
но взаимодействие с удаленным компьютером прекращается после того, как выполняющаяся на нем программа
укажет адрес получателя, т.е. передаст команду RCPT TO:.
- Можно использовать свои фильтры .forward, находящиеся в рабочих каталогах пользователей.
- Если вам необходимо задать длинный список отправителей, письма от которых не должны приниматься, вы должны указать их в отдельном файле, а ссылку на этот файл задать в качестве значения соответствующей опции. Помимо перечисленных выше средств, в сервере Exim также предусмотрен ряд опций, предназначенных для работы со списками IP-адресов. Эти опции, располагающиеся в файле exim.conf, кратко описаны ниже.
• rbl_domains. Значением этой опции является перечень адресов серверов, 
поддерживающих списки IP-адресов 
• rbl_hosts. По умолчанию принимается значение * данной опции; оно указывает на то,
что сервер должен проверять все узлы, с которыми он взаимодействует, на соответствие спискам IP-адресов,
указанных посредством опции rbl_domains.
-Там есть и другие параметры с rbl_ И как обычно логи все покажут если их не удалили, и настроена ротация логов.
-Есть такой кейс как https://rspamd.com/ написан на плюсах, не ест память как спамассасин и вебморда со статистикой.

####  4. Как организовать ежедневное резервное копирование сервера виртуального хостинга создавая при этом минимум нагрузки на него, учитывая, что он содержит около 10-ти миллионов файлов, а общий объем данных около 300Гб?
- Бэкап данных с btrfs и LVM bash скриптами, аналогичный вариант может быть и на ZFS
- Бекапы могут сливаться по NFS на сервер бекапов.
- Есть более централизованное решение https://github.com/bareos/bareos с бекендами, шифрованием и управлением.

####  5. На одного из клиентов виртуального хостинга направлена DDOS атака. Ваши действия по его предотвращению? Какими командами вы будете пользоваться для обнаружения DDOS атаки? Как можно настроить linux сервер так, чтобы воздействие ddos атаки на одного клиента минимально сказалось на общей производительности и доступности сервера?
Виды атак DDOS атак.Приведем список потенциальных типов атак и их классификацию.
- Переполнение канала:
- DNS амплификация и флуд
- NTP амплификация и флуд
- ICMP флуд и фрагментированный ICMP-флуд
- Ping флуд
- UDP флуд и флуд с помощью ботнета, фрагментированный UDP флуд
- VoIP флуд
-  Флуд медиа-данными
- Атака широковещательными ICMP ECHO пакетами и UDP пакетами

Атаки на уязвимость сетевых протоколов:
- Атаки с модификацией поля TOS
- ACK / PUSH ACK флуд
- RST/FIN флуд
- SYN и SYN-ACK флуд
- TCP null/ IP null атака
- Атака поддельными TCP сессиями, в том числе с несколькими ACK
- Атака с подменой адреса отправителя адресом получателя
- Атака с помощью перенаправления трафика высоконагруженных сервисов
- Ping смерти

Атаки на уровне приложений:
- HTTP флуд, одиночными запросами, одиночными сессиями
- Атака с целью отказа приложения
- Атака фрагментированными HTTP пакетами
- Сессионная атака. Атака медленными сессиями
- DDoS атаки “нулевого” дня

Переполнение канала, нужно фильтровать на уровне оборудования перед хостом,
остальные атаки можно отразить сервером.
Начнём узнаем что не так с сервером.

Посмотрим количество процессов Apache:
- ps aux | grep httpd |wc -l
Узнаем число подключений на 80 порт:
- netstat -na | grep :80 | wc -l
То же, в статусе SYN
- netstat -na | grep :80 | grep syn
SYN-флуд:
- netstat -na | grep :80 | grep SYN | wc -l 767
Посмотрим количетсво разных IP:
- netstat -na | grep :80 | grep SYN | sort -u | more
Узнаем на какой домен чаще всего идут запросы:
- tcpdump -npi any port domain
Узнаем информацию о  IP или домене Linux:
- whois xxx.xxx.xxx.xxx
С какого IP сколько запросов:
- netstat -na | grep :80 | sort | uniq -c | sort -nr | more
Вывод информации в реальном времени, IP которые соединены с сервером и
какое количество соединений по каждому IP
- netstat -anp |grep 'tcp\|udp' | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -n

Логи Логи Логи...
- iptables -A FORWARD -p tcp -s <атакуемый IP> --dport 80 -j REJECT и не забыть потом разблочить

Сервер уже должен быть настроен, затюенно ядро и фаерволл и догда сайт точно не ляжет от LOIC.
Лучший вариант отказаться от апаче, если нет вомзожности то связка nginx + апач. С правильными настройками,
на таймауты и буферы.

Кстати на nginx есть код 444 который может помочь и уберечь от нагрузки.
```
location /search {
   return 444;
}
```
И банить из лога он должен быть стандартный combined.

```
ipset -N ban iphash
tail -f access.log | while read LINE; do echo "$LINE" | \
    cut -d'"' -f3 | cut -d' ' -f2 | grep -q 444 && ipset -A 
    ban "${L%% *}"; done
```  
####  6. На OpenVZ ноде LA достигает 300. Как понять причину повышения нагрузки? Напишите команды для анализа проблемы и вероятные причины начиная с самой вероятной.
Обычно 99% проблем с дисками, диски тормозят, httpd плодятся и все виснет.
Посмотрел бы сеть  на  подключения может быть DDOSят непосредственно сам apache - устанавливают кучу коннектов на его портнашел бы впс которая  нагружает vzlist -Ho ctid,laverage можно посмотреть htop что грузит и найти vzpid 123456 и узнаем что за процесс.
пример
```
Pid      CTID   Name
123456 11239   httpd
```
####  7. Какова максимальная производительность Linux маршрутизатора? В чем она измеряется и от чего зависит?
все маршрутизиторы упираются в процессор, если пакеты сдорые и их нужно фрагментировать или наооброт они просто ходят огромными, то может встать все. еще если юзается  arp proxy, тоже может прилечь рутер.

####  8. Как смигрировать Xen domU с одной ноды на другую с минимальным даунтаймом при условии что общее дисковое хранилище не используется и в качестве виртуальных дисков используется lvm? Опишите несколько вариантов.
XEN имеет встроенную возможность перемещать гостей DomU между несколькими узлами Dom0 без остановки их работы, что называется live migration. Понятное дело, для этого нужно, чтобы на всех узлах, между которыми перемещаются гости, были актульные копии их дисков. Тут может быть масса вариантом, например общая СХД, подключенная ко всем узлам(fiber, sas, iscsi и т.д.), либо дешeвый вариант с использование DRBD.

####  9. Расскажите какие знаите системы мониторинга на linux.
NAGIOS, Zabbix, CACTI, Munin
Отдельно стоит упоминуть NETDATA

####  10. Напишите структуру каталогов Unix-подобных систем, в каком каталоге можно просмотреть логи сервера?
Примерная структура каталогов:
- / - корневой каталог.
- /bin - основные системные программы.
- /boot - загрузочные файлы ядра ОС.
- /dev - описания устройств компьютера.
- /etc - конфигурационные файлы системы и подкаталоги с конфигурационными файлами прикладных программ.
- /home - подкаталоги (домашние каталоги) пользователей.
- /lib - динамические библиотеки.
- /lost+found - информация об удаленных файлах, при некоторых условиях помогающая восстановить данные.
- /mnt - подкаталоги стандартные точки монтирования сменных устройств, таких как дисковод CD-ROM.
- /root -домашний каталог суперпользователя.
- /sbin - системные программы.
- /usr - прикладные программы и библиотеки.
- /var -рабочие каталоги программ.
- Логии сервера можно просмотреть в каталоге /var/log

#### 11. Какие демоны  Unix-подобных систем вы знаете?
Ответ:
- Демоны Unix-подобных систем:
- Демон cron: планирование команд
- Демон inetd: управление демонами
- Демон sendmail: транспортировка электронной почты
- Демон snmpd: сервер управления сетями
- Демон nfsd: файловый сервис
- Демон rpc.mountd: ответы на запросы монтирования
- Демон routed: ведение таблиц маршрутизации
- Демон gated: ведение сложных таблиц маршрутизации
- Демон named: сервер DNS
- Демон ftpd: сервер пересылки файлов

# Windows вопросы:

#### 1.  Расскажите своими словами, что такое «MASTER BROWSER» для локальной сети.
Master browser – компьютер, который содержит у себя список компьютеров локальной сети, список открытых сетевых ресурсов этих компьютеров (общих папок, принтеров).Его задача – выдавать этот список, в ответ на широковещательные запросы остальных компьютеров.

#### 2. Каки службы нужны для установки и нормального функционирования ACTIVE DIRECTORY.
Для развертывания Active Directory необходимо чтобы на этом сервере была установлена и сконфигурирована служба DNS-сервера. Если данной службы нет – при установке Active Directory она будет установлена и сконфигурирована самим инсталлятором.

#### 3. В каких режимах может работать встроенный сервер терминалов в MICROSOFT WINDOWS SERVER?
Для развертывания Active Directory необходимо чтобы на этом сервере была установлена и сконфигурирована служба DNS-сервера. Если данной службы нет – при установке Active Directory она будет установлена и сконфигурирована самим инсталлятором.
Сервер терминалов в Microsoft Windows Server 2003, 2008 может работать в двух режимах:
- Режим администрирования – доступны два бесплатных одновременных подключения;
- Режим приложений – на каждое подключение необходимо покупать отдельную клиентскую лицензию для сервера терминалов.

#### 4. Что такое  ActiveDirectory
ActiveDirectory — LDAP-совместимая реализация интеллектуальной службы каталогов корпорации Microsoft для операционных систем семейства Windows NT. ActiveDirectory позволяет администраторам использовать групповые политики (GPO) для обеспечения единообразия настройки пользовательской рабочей среды, развёртывать ПО на множестве компьютеров (через групповые политики или посредством MicrosoftSystemsManagementServer 2003 (или SystemCenterConfigurationManager)), устанавливать обновления ОС, прикладного и серверного ПО на всех компьютерах в сети (с использованием WindowsServerUpdateServices (WSUS); SoftwareUpdateServices (SUS) ранее). ActiveDirectory хранит данные и настройки среды в централизованной базе данных. Сети ActiveDirectory могут быть различного размера: от нескольких сотен до нескольких миллионов объектов.
(или "служба каталогов" по-русски) - это огромное хранилище, которое может хранить разную информацию о пользователях, компьютерах, принтерах и вообще еще много всего; это основное, что нам понадобится для дальнейшей работы. Каждая единица, хранящаяся в AD, называется объектом, причем служба также хранит и информацию о самом объекте и его свойствах, и называется это атрибуты объекта. Для доступа к службе существует специальный протокол LDAP.

#### 5. Чтотакое  LDAP
LDAP (англ. LightweightDirectoryAccessProtocol — «облегчённый протокол доступа к каталогам») — это сетевой протокол для доступа к службе каталогов. LDAP — относительно простой протокол, использующий TCP/IP и позволяющий производить операции аутентификации (bind), поиска (search) и сравнения (compare), а также операции добавления, изменения или удаления записей.

LDAP (LightweightDirectoryAccessProtocol - простой протокол доступа к каталогам), который и определяет способы доступа и обращения между клиентом и сервером AD. Здесь для каждого объекта есть его собственное особенное имя, с помощью которого и можно различать, что перед нами находится, данные о пользователе или же компе. Причем это имя помогает найти путь в AD, где этот объект лежит. У имени есть две основных части - CN (commonname - общее имя) и DC (domaincomponent- доменный компонент). CN показывает на объект или место, где он лежит, а DC говорит о домене, к которому относится объект. Вот, например, имя CN=Vasilii,CN=Guests,CN=Accounts,DC=subdomain,DC=domain,DC=yes говорит о том, что пользователь Василий лежит в контейнере гостей, который, в свою очередь, лежит в контейнере аккаунты, и все это относится к домену subdomain, причем он является поддоменомdomain, входящим в домен yes %). Вот так все запутано, но на деле выглядит гораздо проще и понятнее, о чем мы поговорим дальше. А в глобальном смысле AD делится на леса, деревья, домены и OU (OrganizationUnit - организационная единица), то есть полная аналогия с реальной природой, где домены представляются ветками, объединение доменов - дерево и скопище деревьев - лес. Но это обычно требуется в больших организациях, нам же хватит и одного домена, который по совместительству будет являться и деревом, и лесом :). Короче говоря, хватит лирической теории, будем осваивать все это дело на практике.

#### 6. Что такое WINS
WINS (англ. WindowsInternetNameService) — cлужба сопоставления NetBIOS-имён компьютеров с ip-адресами узлов.



#### 10. Что делает команда CHKDSK.EXE. Назовите известные вам ключи этой команды.
 Данная команда проверяет указанный диск на наличие ошибок и при необхо-
димости исправляет их. Команда также помечает поврежденные сектора и восста-
навливает данные, которые удается прочитать.
Использование:
- chkdsk.exe имя_диска:без параметров выводит сведения о состоянии текущего диска;
- /f — полная проверка указанного диска и исправление найденных ошибок.
- /r — поиск поврежденных секторов и попытка восстановления данных, которые можно прочитать. (при использовании этого параметра, система требует, чтобы параметр 
- /f тоже был указан).

#### 11. Что делает команда SFC.EXE? Назовите известные вам ключи этой команды.
Утилита командной строки sfc.exe - предназначена для проверки всех версий защищённых системных файлов и восстановления их из специального кэша (папка %Каталог Windows%c\system32\dllcache) в случае подмены или повреждения.
 Запуск возможен только с правами администратора.
Ключи:
- /scannow - немедленная проверка всех защищённых системных файлов;
- /scanonce - проверка защищённых системных файлов при следующей загрузке системы;
- /scanboot - проверка всех защищённых системных файлов при каждой загрузке системы;
- /revert - восстановление всех настроек по умолчанию;
- /purgecache - очистка кэша защищённых файлов программы и немедленная проверка всех защищённых системных файлов;
- /cachesize=х - установка размера кэша защищённых файлов в мегабайтах (по умолчанию — 50Мбайт)

#### 13. Что делает команда FIXBOOT.EXE?
Эта команда служит для записи нового кода загрузочного сектора Windows в системный раздел. 
Использование:
fixboot имя_диска.
Имя_диска — диск, на котором будет записан загрузочный сектор. Данная команда 
исправляет повреждения в загрузочном секторе Windows.
Доступна только в консоли восстановления Windows.



# FreeBSD вопросы:

# Виртуализация KVM, OpenVZ, XEN и Docker

# VOIP, SIP, Asterisk

# Ngnix, Letsencrypt & php

#### 1. Блокировка скрытых файлов в Nginx
Заблокировать такого типа файлы можно правилом:
location ~ /\. {
	deny all;
}


# Mysql, Postgresql, MongoDB, SSDB, Redis
